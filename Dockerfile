###################################################################################################

FROM katherinealbany/athena:stable

###################################################################################################

MAINTAINER Katherine Albany

###################################################################################################

RUN apt-get update && apt-get install --no-install-recommends --quiet --yes                       \
    sudo                                                                                          \
    curl                                                                                          \
    wget                                                                                          \
    python                                                                                        \
    python-yaml                                                                                   \
    python-jinja2                                                                                 \
    openssh-server

###################################################################################################

ADD sshd.config  /etc/ssh/sshd_config
ADD dockable.pub /root/.ssh/authorized_keys

###################################################################################################

RUN mkdir -m 0755 /var/run/sshd                                                                   \
 && chmod -c 0600 /etc/ssh/sshd_config                                                            \
 && chmod -c 0600 /root/.ssh/authorized_keys                                                      \
 && find /var/log -type f -exec dd if=/dev/null of={} > /dev/null 2>&1 \;

###################################################################################################

EXPOSE 22

###################################################################################################

CMD ["/usr/sbin/sshd", "-Dep 22"]

###################################################################################################
